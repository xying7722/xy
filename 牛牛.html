<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>牛牛计算器</title>
		<style type="text/css">
		    body{
		    	text-align: center;
		    }
			body>form>table:nth-of-type(1) div{
				width: 78.5px;
				height: 120px;
				background-image: url(img/pai.jpg);
				background-size: 1300% 100%;
				
			}
			table{
				border: 5px double gainsboro;
				margin: 0 auto;
			}
			section{
				width: 392.5px;
				height: 120px;
				border: 5px double gainsboro;
				margin: 0 auto;
				background-image: url(img/ts2.png);
				background-repeat: no-repeat;
				background-position: center;
				
			}
			section div{
				width: 78.5px;
				height: 120px;
				float: left;
				background-image: url(img/pai.jpg);
				box-sizing: border-box;
			}
			p,caption{
				color: red;
				font-size: 32px;
			}
			br{
				clear: both;
			}
			input{
				color: red;
				background-color: white;
			}
		</style>
	</head>
	<body>
	<form autocomplete="off">
		
		<table>
			<caption>点击下列选取5张牌:</caption>
			<tr>
				<td>
					<div class="num"></div>
				</td>
				<td>
					<div class="num"></div>
				</td>
				<td>
					<div class="num"></div>
				</td>
				<td>
					<div class="num"></div>
				</td>
				<td>
					<div class="num"></div>
				</td>
				<td>
					<div class="num"></div>
				</td>
				<td>
					<div class="num"></div>
				</td>
			</tr>
			<tr>
				<td>
					<div class="num"></div>
				</td>
				<td>
					<div class="num"></div>
				</td>
				<td>
					<div class="num"></div>
				</td>
				<td>
					<div class="num"></div>
				</td>
				<td>
					<div class="num"></div>
				</td>
				<td>
					<div class="num"></div>
				</td>
				<td>
					 <input type="submit" value="提交计算" onclick="niuniu(event);"/><br />
					 <input type="reset" value="重新选取" onclick="resetPai(event);"/>
				</td>
			</tr>
		</table>
		
		 
		 <section id="xuanPai">
		 	 
		 </section>
		 <br />
		 <p id="r"></p>
	     
	</form>     
	</body>
	<script type="text/javascript">
	    var paiNum=0;
	    var div=document.getElementsByClassName("num");
	    var sec=document.getElementById("xuanPai");
	    var r=document.getElementById("r");
	    var flag2=false;
	    var x=0;
	    for(var i=0;i<13;i++){
	    	div[i].index=i;
	    	div[i].style.backgroundPosition=(-78 * i)+"px 0px";
	    	div[i].addEventListener('click',divClick);
	    }
	    function divClick(){
            if(paiNum==5){
            	alert("只能选取5张牌");
            }else{
            	var d=document.createElement("div");
            	d.style=div[this.index].style;
            	d.text=this.index+1;
            	d.className='xuanPai2';
            	d.style.backgroundPosition=(-78.5 * this.index)+"px 0px";
            	d.addEventListener('click',function(){
		    		sec.removeChild(d);
		    		var div2=document.getElementsByClassName("xuanPai2");
		    		for(var i=0;i<(paiNum==5&&div2.length);i++){
						div2[i].style.border="none";
					}
            	    paiNum--;

		    	});
            	sec.appendChild(d);
            	paiNum++;
            }
	    }
	    function resetPai(event){
	    	var div2=document.getElementsByClassName("xuanPai2");
	    	while(div2.length!=0){
				sec.removeChild(div2[0]);
			}
	    	r.innerHTML="";
	    	paiNum=0;
	    }
		function niuniu(event){
			event.preventDefault();
			r.innerHTML="";
			var n=new Array();
			var sum=0;
			var h=0;
			var div2=document.getElementsByClassName("xuanPai2");
			if(paiNum<5){
				alert("请选取五张牌");
				return;
			}
			if((div2[0].text==div2[1].text)&&(div2[0].text==div2[2].text)&&(div2[0].text==div2[3].text)&&(div2[0].text==div2[4].text)){
				alert("不能选取五张牌一样的牌");
				return;
			}
			for(var i=0;i<div2.length;i++){
				n[i]=div2[i].text;
			}
			for(var i=0;i<5;i++){
				sum+=n[i];
				if(n[i]>10){
					h++;
					
				}
				if(n[i]<5){
					x++;
				}
			}
//			alert(x);
			if(sum<=10&&x==5){
				r.innerHTML="五小牛";
				x=0;
				return;
			}
			if(h==5){
//				alert(h);
				r.innerHTML="五花牛";
				h=0;
				
				return;
			}
			
			for(var i=0;i<5;i++){
				for(var j=i+1;j<5;j++){
					for(var s=j+1;s<5;s++){
                        if(((n[i]>10?10:n[i])+(n[j]>10?10:n[j])+(n[s]>10?10:n[s]))%10==0){
                        	r.innerHTML+="{"+n[i]+","+n[j]+","+n[s]+"}";
                        	var str="01234".replace(i.toString(),"");
                        	str=str.replace(j.toString(),"");
                        	str=str.replace(s.toString(),"");
                        	div2[i].style.border="3px solid red";
                        	div2[j].style.border="3px solid red";
                        	div2[s].style.border="3px solid red";
                            var k=((n[parseInt(str.charAt(1))]>10?10:n[parseInt(str.charAt(1))])+(n[parseInt(str.charAt(0))]>10?10:n[parseInt(str.charAt(0))]))%10;
                            r.innerHTML+="{"+n[parseInt(str.charAt(0))]+","+n[parseInt(str.charAt(1))]+"}"+"是";
                            switch(k){
                                case 0:
                                	r.innerHTML+="牛牛"+"<br>";
                                	break;
                                case 1:
                                	r.innerHTML+="牛一"+"<br>";
                                	break;
                                case 2:
                                	r.innerHTML+="牛二"+"<br>";
                                	break;
                                case 3:
                                	r.innerHTML+="牛三"+"<br>";
                                	break;
                                case 4:
                                	r.innerHTML+="牛四"+"<br>";
//                              	document.writeln("牛四");
                                	break;
                                case 5:
									r.innerHTML+="牛五"+"<br>";
//                              	document.writeln("牛五");
                                	break;
                                case 6:
                                	r.innerHTML+="牛六"+"<br>";
//                              	document.writeln("牛六");
                                	break;
                                case 7:
                                	r.innerHTML+="牛七"+"<br>";
//                              	document.writeln("牛七");
                                	break;
                                case 8:
                                	r.innerHTML+="牛八"+"<br>";
//                              		document.writeln("牛八");
                                	break;
                                case 9:
                                	r.innerHTML+="牛九"+"<br>";
//                              	document.writeln("牛九");
                                	break;
                            }
                            return;
                        }
					}
				}
			}
			if(r.innerHTML==""){
				r.innerHTML="没牛"+"<br>";
//				document.writeln("没牛");
			}
		
	}
	</script>
</html>
